#!/usr/bin/env ruby
require "date"

def write_date(file)
  file.truncate(0)
  file.write(DateTime.now)
end

File.open("tmp/last-security-audit", "a+") do |file|
  date = DateTime.parse(file.read(256).to_s)

  if date < DateTime.now - date.prev_day(7)
    puts true
    write_date(file)
  else
    puts false
  end
rescue Date::Error
  puts true
  write_date(file)
end
